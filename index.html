<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SW CD Demo</title>
    <script src="index.js"></script>
</head>
<body>
<div>
    <div>
        attachment; filename=123---ãƒ•ã‚¡ã‚¤ãƒ«---ðŸŸ¦â¬œðŸŸ¥---xxx.txt
    </div>
    <button id="button-0" data-url="./xxx-0">Click me to log 0</button>
    <a href="./xxx-0">Click me to download 0</a>
    <div class="log" data-url="./xxx-0"></div>
</div>
<hr>
<div>
    <div>
        attachment; filename="123---ãƒ•ã‚¡ã‚¤ãƒ«---ðŸŸ¦â¬œðŸŸ¥---xxx.txt"
    </div>
    <button id="button-1" data-url="./xxx-1">Click me to log 1</button>
    <a href="./xxx-1">Click me to download 1</a>
    <div class="log" data-url="./xxx-1"></div>
</div>
<hr>
<div>
    rfc5987
    <div>
        attachment; filename="123---ãƒ•ã‚¡ã‚¤ãƒ«---ðŸŸ¦â¬œðŸŸ¥---xxx.txt"; filename*=UTF-8''123---%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB---%F0%9F%9F%A6%E2%AC%9C%F0%9F%9F%A5---xxx.txt
    </div>
    <button id="button-2" data-url="./xxx-2">Click me to log 2</button>
    <a href="./xxx-2">Click me to download 2</a>
    <div class="log" data-url="./xxx-2"></div>
</div>

<script>
    document.querySelectorAll("button").forEach(button => {
        button.addEventListener("click", async (event) => {
            const response = await fetch(button.dataset.url)
            const byteString = response.headers.get("content-disposition");
            console.log(byteString);
            console.log(byteStringToString(byteString));
            const div = document.querySelector(`div[data-url="${button.dataset.url}"]`);
            console.log(div);
            div.textContent = `Parsed name: "${contentDispositionFilename(byteString)}"`;
        });
    });
</script>
</body>
</html>
